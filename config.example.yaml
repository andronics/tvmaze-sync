# TVMaze-Sync Configuration Example
# Copy this file to config.yaml and customize for your setup

# TVMaze API Configuration
tvmaze:
  # Optional premium API key for higher rate limits
  # Supports ${VAR} and ${VAR_FILE} patterns
  api_key: "${TVMAZE_API_KEY}"  # or set to null if not using premium

  # Rate limit (requests per 10 seconds)
  # Free tier: 20, Premium: higher
  rate_limit: 20

  # How far back to check for updates: day, week, month
  update_window: "week"

# Sync Cycle Configuration
sync:
  # How often to run sync cycles
  # Format: Xs (seconds), Xm (minutes), Xh (hours), Xd (days), Xw (weeks), Xy (years)
  poll_interval: "6h"

  # How long to wait before retrying shows with pending TVDB IDs
  retry_delay: "1w"

  # Time before abandoning shows without TVDB IDs
  abandon_after: "1y"

# =============================================================================
# Show Selection Configuration
#
# Shows are processed in this order:
#   1. Global exclude rules are checked first - matching shows are rejected
#   2. Selections are evaluated - show must match at least ONE selection
#
# Empty selections list = all shows rejected (forces explicit configuration)
# =============================================================================

# Global Exclude Rules - shows matching ANY of these criteria are rejected
exclude:
  # Exclude shows with these genres
  genres:
    - "Reality"
    - "Talk Show"
    - "Game Show"
    - "News"
    - "Sports"

  # Exclude shows of these types
  types: []

  # Exclude shows in these languages
  languages: []

  # Exclude shows from these countries (ISO 3166-1 codes, e.g., "GB" not "UK")
  countries: []

  # Exclude shows from these networks
  networks:
    - "Home Shopping Network"

# Selections - show must match ALL criteria within a selection,
# but only needs to match ONE selection overall (OR logic between selections)
selections:
  # Example: English-language scripted shows from English-speaking countries
  - name: "English Scripted"
    languages:
      - "English"
    countries:
      - "US"
      - "GB"
      - "CA"
      - "AU"
      - "NZ"
      - "IE"
    types:
      - "Scripted"
      - "Animation"
    # status:
    #   - "Running"
    #   - "In Development"
    premiered:
      after: "2010-01-01"  # ISO date format YYYY-MM-DD
      # before: "2025-12-31"  # Optional upper bound
    rating:
      min: 6.0  # Minimum TVMaze rating (0-10)
      # max: 10.0
    runtime:
      min: 20  # Minimum episode runtime in minutes
      # max: 90

  # Example: High-rated documentaries from any country
  - name: "Quality Documentaries"
    types:
      - "Documentary"
    rating:
      min: 7.5
    premiered:
      after: "2015-01-01"

# Sonarr Configuration
sonarr:
  # Sonarr URL (required)
  url: "${SONARR_URL}"

  # Sonarr API key (required)
  # Use ${SONARR_API_KEY_FILE} for Docker secrets
  api_key: "${SONARR_API_KEY}"

  # Root folder path or ID (required)
  # Can be path like "/tv" or ID like "1"
  root_folder: "/tv"

  # Quality profile name or ID (required)
  # Can be name like "HD-1080p" or ID like "4"
  quality_profile: "HD-1080p"

  # Language profile (required for Sonarr v3, ignored in v4+)
  # Can be name like "English" or ID like "1"
  language_profile: "English"

  # Monitor mode: all, future, missing, existing, pilot, firstSeason, latestSeason, none
  monitor: "all"

  # Search for missing episodes after adding
  search_on_add: true

  # Tags to apply (list of tag names or IDs)
  tags:
    - "auto-sync"

# Storage Configuration
storage:
  # Path to data directory for database and state files
  path: "/data"

# Logging Configuration
logging:
  # Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
  level: "INFO"

  # Log format: json, text
  format: "json"

# HTTP Server Configuration
server:
  # Enable HTTP server for health checks, metrics, and API
  enabled: true

  # Port to listen on
  port: 8080

  # API key for protected endpoints (required)
  # Public endpoints: /health, /ready, /metrics
  # Protected endpoints: /config, /trigger, /state, /shows, /refilter
  api_key: "${SERVER_API_KEY}"

# Dry Run Mode
# Defaults to true for safety - set to false when ready to add shows to Sonarr
dry_run: false  # Set to true to test without adding shows
